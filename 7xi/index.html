<!DOCTYPE html>
<!-- saved from url=(0029)http://mobi.durex.com.cn/cvd/ -->
<html><head lang="en"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>杜杜的七夕情人节</title>
    <script src="js/lufylegend-1.9.9.simple.min.js" type="text/javascript"></script>
    <script src="js/lufylegend.LoadingSample4-0.1.0.min.js" type="text/javascript"></script>

    <script src="./js/zepto.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="./css/main.css">
    
    
    <!--  
    <script type="text/javascript">
        var _smq = _smq || [];
        _smq.push(['_setAccount', '57d93a5', new Date()]);
        _smq.push(['pageview']);

        (function () {
            var sm = document.createElement('script'); sm.type = 'text/javascript'; sm.async = true;
            sm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdnmaster.com/sitemaster/collect.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sm, s);
        })();
</script>
<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29156015-1']);
    _gaq.push(['_addOrganic', 'soso', 'w']);
    _gaq.push(['_addOrganic', 'sogou', 'query']);
    _gaq.push(['_addOrganic', 'yodao', 'q']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>
-->
</head>
<body style="cursor: default;">
    <div id="legend" style="font-size: 0px;"><div style="position:absolute;margin:0;padding:0;overflow:visible;-webkit-transform:translateZ(0);z-index:0;"><canvas id="legend_canvas" style="margin: 0px 0px 0px 480.692px; padding: 0px; width: 449px; height: 729px;" width="640" height="1040"></canvas></div><div id="legend_InputText" style="position:absolute;margin:0;padding:0;z-index:10;display:none;"><textarea rows="1" id="legend_InputTextareaBox" style="resize:none;background:transparent;border:0px;"></textarea><input type="text" id="legend_InputTextBox" style="background:transparent;border:0px;"><input type="password" id="legend_passwordBox" style="background:transparent;border:0px;"></div></div>


<script>
var isAndroid =false;
var browser = {
versions: function () {
var u = navigator.userAgent, app = navigator.appVersion;
return { //移动终端浏览器版本信息 
ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端 
android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或uc浏览器 
iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器 
iPad: u.indexOf('iPad') > -1, //是否iPad 
};
}(),
}
if (browser.versions.iPhone || browser.versions.iPad || browser.versions.ios) {
    isAndroid=true;
}
if (browser.versions.android) {
    isAndroid=false;
}
var isfirst = true;;
/*
if(getCookie("name")){
var isfirst = false;
}
else{
setCookie("name","1"); 
isfirst = true;
}
*/
var imgData = [
{ name: "20", path: "./images/20.png" },
{ name: "P1_bj", path: "./images/p5_bj.jpg" },
{ name: "P1_btn", path: "./images/P1_btn.png" },
{ name: "P1_logo", path: "./images/P1_logo.png" },
{ name: "P1_man", path: "./images/P1_man.png" },
{ name: "P1_title", path: "./images/P1_title.png" },
{ name: "P1_woman", path: "./images/P1_woman.png" },
{ name: "P1_Word", path: "./images/P1_Word.png" },
{ name: "p2_bj", path: "./images/p2_bj1.jpg" },
{ name: "p2_bj1", path: "./images/p2_bj2.jpg" },
{ name: "P2_btn", path: "./images/P2_btn.png" },
{ name: "p2_n", path: "./images/p2_n.png" },
{ name: "p2_W", path: "./images/p2_W.png" },
{ name: "P3_fail", path: "./images/P3_fail.jpg" },
{ name: "P3_man", path: "./images/P3_man.png" },
{ name: "P3_woman", path: "./images/P3_woman.png" },
{ name: "P3_hand", path: "./images/P3_hand.png" },
{ name: "P3_page", path: "./images/P3_page2.png" },
{ name: "P3_suess", path: "./images/P3_suess.jpg" },
{ name: "P3_againbtn", path: "./images/P3_againbtn.png" },
{ name: "P4_btn1", path: "./images/P4_btn1.png" },
{ name: "P4_btn2", path: "./images/P4_btn2.png" },
{ name: "P4_btn3", path: "./images/P4_btn3.png" },
{ name: "P4_T1", path: "./images/P4_T1.png" },
{ name: "P4_T2", path: "./images/P4_T2.png" },
{ name: "P4_T3", path: "./images/P4_T3.png" },
{ name: "P4_T4", path: "./images/P4_T4.png" },
{ name: "P4_TT1", path: "./images/P4_TT1.png" },
{ name: "P4_TT2", path: "./images/P4_TT2.png" },
{ name: "P4_word", path: "./images/P4_word.png" },
{ name: "P4_you", path: "./images/P4_you.jpg" },
{ name: "P4_you2", path: "./images/P4_you2.jpg" },
{ name: "P4_close", path: "./images/P4_close.png" },
{ name: "Time", path: "./images/Time.png" },
{ name: "Timeimg", path: "./images/Timeimg.png" },
{ name: "Timetop", path: "./images/Timetop.png" },
{ name: "unmusic", path: "./images/music0.png" },
{ name: "music", path: "./images/music1.png" },
{ name: "guang", path: "./images/guang.png" },
{ name: "show_1", path: "./images/show_1.jpg" },
{ name: "show_2", path: "./images/show_2.jpg" },
{ name: "show_3", path: "./images/show_3.jpg" },
{ name: "lotbtn", path: "./images/lotbtn.png" },
{ name: "lotbtn1", path: "./images/lotbtn1.png" },
{ name: "show_hand", path: "./images/show_hand.png" },
{ name: "sound_bg", path: "./images/bjsound.mp3", type: "sound" },
{ name: "stopsound", path: "./images/stop.mp3", type: "sound" }
];
var backLayer, tempLayer, middleLayer, topLayer, clickLayer, p2_btnLsprit,ttoplay;
var p2_bjLBitmap, p2_bjLBitmapto, p2_bjLBitmapend, p2_WLsprit, p2_nLsprit, coutTextField, TimeimgLsprit;
var P3_handLBitmap,guang;
var ween, tween, weenbtn;
var speed = 1, speedindex = 0.01;
var isstart = false, isend = false, isdrop = false, sport = "left",isstop=true;
var stepindex = 60,roadindex=0;
var step = 60;
var speed = 3, tspeed = 3,wspeed=3;
var isLoadSound = false,ismusic=true;
var sound_bg = new LSound();
var stopsound = new LSound();
init(20, "legend", 640, 1040, main);
function main() {
   // LGlobal.setDebug(true);
    if (LGlobal.mobile) {
        if (window.innerHeight / window.innerWidth > 1.5) {
            LGlobal.width = 640;
            LGlobal.height = 640 * window.innerHeight / window.innerWidth;
            LGlobal.canvasObj.width = LGlobal.width;
            LGlobal.canvasObj.height = LGlobal.height;
        }
    }
    LGlobal.align = LStageAlign.TOP_MIDDLE;
    LGlobal.stageScale = LStageScaleMode.SHOW_ALL;
    LSystem.screen(LStage.FULL_SCREEN);
    loadingLayer = new LoadingSample4(LGlobal.height, "#dddccd", "#aab275");
    addChild(loadingLayer);
    LLoadManage.load(imgData,
                function (progress) {
                    loadingLayer.setProgress(progress);
                }, gameInit);
}
function gameInit(result) {
    imglist = result;
    removeChild(loadingLayer);
    loadingLayer = null;

    backLayer = new LSprite();
    addChild(backLayer);

    middleLayer = new LSprite();
    addChild(middleLayer);

    tempLayer = new LSprite();
    addChild(tempLayer);

    topLayer = new LSprite();
    addChild(topLayer);

    clickLayer = new LSprite();
    addChild(clickLayer);

    ttopLayer = new LSprite();
    addChild(ttopLayer);

    var P1_bjLBitmap = new LBitmap(new LBitmapData(imglist["P1_bj"]));
    backLayer.addChild(P1_bjLBitmap);

    var P1_WordLBitmap = new LBitmap(new LBitmapData(imglist["P1_Word"]));
    P1_WordLBitmap.x=70;
    P1_WordLBitmap.y = 49;
    var maskObj = new LSprite();
    maskObj.graphics.drawRect(0, "#ff0000", [-500, -400, 525, 362]);
    P1_WordLBitmap.mask = maskObj;
    LTweenLite.to(maskObj, 1.5, {
        x: 555,
        y: 450,
        ease: LEasing.Quint.easeOut       
    })
    backLayer.addChild(P1_WordLBitmap);    

    //文字
    var P1_titleLBitmap = new MiddleBitmap(new LBitmapData(imglist["P1_title"]));
    P1_titleLBitmap.x = 320;
    P1_titleLBitmap.y = 445;
    P1_titleLBitmap.scaleX = 0.5;
    P1_titleLBitmap.scaleY = 0.5;
    P1_titleLBitmap.alpha = 0;
    LTweenLite.to(P1_titleLBitmap,0.5, {
        scaleX: 1,
        scaleY: 1,
        alpha: 1,
        delay:1,
        ease: LEasing.None.easeOut
    });
    backLayer.addChild(P1_titleLBitmap);

    var P1_manLBitmap = new LBitmap(new LBitmapData(imglist["P1_man"]));
    P1_manLBitmap.x =660;
    P1_manLBitmap.y = 746;
    P1_manLBitmap.alpha=0.7;
    LTweenLite.to(P1_manLBitmap, 1.5, {
        x:386,
        y:706,
        alpha: 1,
        delay: 1,
        ease: LEasing.Quint.easeOut
    });
    backLayer.addChild(P1_manLBitmap);

    var P1_womanLBitmap = new LBitmap(new LBitmapData(imglist["P1_woman"]));
    P1_womanLBitmap.x = -200;
    P1_womanLBitmap.y = 500;
    P1_womanLBitmap.alpha = 0.7;
    LTweenLite.to(P1_womanLBitmap, 1.5, {
        x: 0,
        y: 550,
        alpha: 1,
        delay: 1,
        ease: LEasing.Quint.easeOut
    });
    backLayer.addChild(P1_womanLBitmap);
    

    var P1_btnLsprit = new LSprite();
    P1_btnLsprit.addChild(new MiddleBitmap(new LBitmapData(imglist["P1_btn"])));
    P1_btnLsprit.x = 320;
    P1_btnLsprit.y = 990;
    P1_btnLsprit.alpha = 0;
    LTweenLite.to(P1_btnLsprit, 1, {
        y:940,
        alpha: 1,
        delay: 2.5,
        ease: LEasing.Back.easeOut
    });

    /*
    P1_btnLsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function(){ 
       // _smq.push(['custom','七夕小游戏','主页面','开始']);
       // _gaq.push(['_trackEvent','七夕小游戏','主页面','开始']);
        if(isfirst){
            studyGame();
        }else{
            ReadGame()
        }
    });
    */
    P1_btnLsprit.addEventListener(LMouseEvent.MOUSE_DOWN, gameover);
    backLayer.addChild(P1_btnLsprit);

    var P1_logoLBitmap = new LBitmap(new LBitmapData(imglist["P1_logo"]));
    P1_logoLBitmap.x = 200;
    P1_logoLBitmap.y = 0;
    P1_logoLBitmap.scaleX = 6;
    P1_logoLBitmap.scaleY = 6;
    P1_logoLBitmap.alpha = 0;
    LTweenLite.to(P1_logoLBitmap, 0.5, {
        scaleX: 1,
        scaleY: 1,
        x: 106,
        y: 152,
        alpha: 1,
        delay: 2.5,
        ease: LEasing.None.easeOut
    })
    backLayer.addChild(P1_logoLBitmap);
    //addChild(new FPS()); 
}
function studyGame(){
    musicsprit=new LSprite();       
    musicsprit.x=520;
    musicsprit.y=0;
    ttopLayer.addChild(musicsprit);
    musicsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
            musicsprit.removeAllChild();
            if(ismusic){
            musicsprit.addChild(new LBitmap(new LBitmapData(imglist["unmusic"])));
            ismusic=false;
            sound_bg.stop();
            }else{
            musicsprit.addChild(new LBitmap(new LBitmapData(imglist["music"])));
            ismusic=true;
            sound_bg.play(0, 100);
            }
        });
    if(ismusic){
        musicsprit.addChild(new LBitmap(new LBitmapData(imglist["music"])));
        isClickM = LSound.webAudioEnabled;
        if (!isLoadSound) {
            isLoadSound = true;
            if (isClickM || !isAndroid) {
                stopsound.load(imglist["stopsound"]);
                sound_bg.load(imglist["sound_bg"]);
       
                stopsound.playSegment(0, 0.01);       
                sound_bg.play(0, 100);
            } else {
                sound_bg.load(imglist["sound_bg"]);
                sound_bg.play(0, 100);
            }
        }
           
    }else{
        musicsprit.addChild(new LBitmap(new LBitmapData(imglist["unmusic"])));           
    }

    backLayer.removeAllChild();
    tempLayer.removeAllChild();
    p2_bjLBitmap = new LBitmap(new LBitmapData(imglist["p2_bj"]));  
    middleLayer.addChild(p2_bjLBitmap);

    p2_bjLBitmapto = p2_bjLBitmap.clone();
    p2_bjLBitmapto.x = p2_bjLBitmap.getWidth();
    middleLayer.addChild(p2_bjLBitmapto);

    p2_bjLBitmapend = new LBitmap(new LBitmapData(imglist["p2_bj1"]));
    p2_bjLBitmapend.x = p2_bjLBitmap.getWidth() * 4;
    middleLayer.addChild(p2_bjLBitmapend);   

    p2_nLsprit = new LSprite();
    var list = LGlobal.divideCoordinate(1083, 363, 1, 3);
    var data = new LBitmapData(imglist["p2_n"], 0, 0, 361, 363);
    p2_nLsprit = new LAnimationTimeline(data, list);
    p2_nLsprit.setLabel("fly", 0, 2, -1, false);
    p2_nLsprit.setLabel("addspeed", 0, 1, -1, false);
    p2_nLsprit.setLabel("stopfly", 0, 0, -1, false);
    p2_nLsprit.speed = 50;
    p2_nLsprit.stop();  
    p2_nLsprit.x = 63;
    p2_nLsprit.y = 470;
    middleLayer.addChild(p2_nLsprit);

    p2_WLsprit = new LSprite();
    var listw = LGlobal.divideCoordinate(1611, 463, 1, 3);
    var dataw = new LBitmapData(imglist["p2_W"], 0, 0, 537, 463);
    p2_WLsprit = new LAnimationTimeline(dataw, listw);
    p2_WLsprit.setLabel("see", 0, 2, -1, false);
    p2_WLsprit.setLabel("ready", 0, 1, -1, false);
    p2_WLsprit.setLabel("stop", 0, 0, -1, false);
    p2_WLsprit.speed = 30;
    p2_WLsprit.stop();   
    p2_WLsprit.x = 100;
    p2_WLsprit.y = 0;
    middleLayer.addChild(p2_WLsprit);

    var exShape = new LShape();
    exShape.graphics.drawRect(1, "#fff", [0, 0, 640,  LGlobal.height], true, "#000");
    exShape.alpha = 0.5;
    middleLayer.addChild(exShape);

    p2_btnLsprit = new LSprite();
    p2_btnLsprit.addChild(new MiddleBitmap(new LBitmapData(imglist["P2_btn"])));
    p2_btnLsprit.x = 520;
    p2_btnLsprit.y = 687;
    middleLayer.addChild(p2_btnLsprit);   

    var show_1=new LBitmap(new LBitmapData(imglist["show_1"]));
    show_1.x = 80;
    show_1.y = 449;  
    show_1.alpha=0;
    middleLayer.addChild(show_1);
    LTweenLite.to(show_1,0.5,{
        alpha:1,
        delay:0.5,
    })

    guang=new LBitmap(new LBitmapData(imglist["guang"]));
    guang.x=0;
    guang.y=180;  
    guang.alpha=0;                                              
    middleLayer.addChild(guang);

    var show_hand=new MiddleBitmap(new LBitmapData(imglist["show_hand"]));
    show_hand.x = 520;
    show_hand.y = 720;
    show_hand.alpha=0;
    show_hand.scaleX = 1;
    show_hand.scaleY = 1;
    middleLayer.addChild(show_hand);
    LTweenLite.to(show_hand,0.5,{      
        alpha:1,
        delay:1.5       
    }).to(show_hand,0.5,{
        scaleX:0.9,
        scaleY:0.9,
        onComplete:function(){
            LTweenLite.to(show_1,0.5,{
                alpha:0,
                delay:1,               
                onComplete:function(){
                    middleLayer.removeChild(show_1);
                    p2_WLsprit.alpha=0.2;
                    middleLayer.setChildIndex(p2_WLsprit, middleLayer.numChildren - 3);
                    LTweenLite.to(p2_WLsprit,0.5,{
                        alpha:1,
                        onComplete:function(){
                            p2_WLsprit.play();
                            p2_WLsprit.gotoAndStop("ready");
                            p2_WLsprit.stop();  
                        }
                    });                   
                    var show_2=new LBitmap(new LBitmapData(imglist["show_2"]));
                    show_2.x = 80;
                    show_2.y = 449;  
                    show_2.alpha=0;
                    middleLayer.addChild(show_2);
                    LTweenLite.to(show_2,0.5,{
                        alpha:1,
                        delay:0.5,
                        onComplete:function(){                            
                                LTweenLite.to(show_2,0.5,{
                                    alpha:0,
                                    delay:2,
                                    onComplete:function(){
                                    var show_3=new LBitmap(new LBitmapData(imglist["show_3"]));
                                    show_3.x = 80;
                                    show_3.y = 449;  
                                    show_3.alpha=0;
                                    middleLayer.addChild(show_3);
                                    LTweenLite.to(show_3,0.5,{
                                        alpha:1,
                                        delay:0.5,
                                        onComplete:function(){
                                            LTweenLite.to(show_hand,0.5,{
                                                scaleX:1,
                                                scaleY:1
                                            }).to(show_hand,0.5,{
                                                alpha:0,
                                                onComplete:function(){   
                                                    p2_WLsprit.play();
                                                    p2_WLsprit.gotoAndStop("see");
                                                    p2_WLsprit.stop();                                             
                                                    guang.alpha=1;  
                                                    setTimeout(function(){
                                                        ReadGame();
                                                    },1500);
                                                }
                                            })
                                            
                                        }
                                    })  
                                 }
                            });
                        }
                    })  
                }
            });
           

        }         
    })
    
   
    
}
function ReadGame() {
    ttopLayer.removeAllChild();
    musicsprit=new LSprite();       
    musicsprit.x=520;
    musicsprit.y=0;
    ttopLayer.addChild(musicsprit);
    musicsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
            musicsprit.removeAllChild();
            if(ismusic){
            musicsprit.addChild(new LBitmap(new LBitmapData(imglist["unmusic"])));
            ismusic=false;
            sound_bg.stop();
            }else{
            musicsprit.addChild(new LBitmap(new LBitmapData(imglist["music"])));
            ismusic=true;
            sound_bg.play(0, 100);
            }
        });
    if(ismusic){
        musicsprit.addChild(new LBitmap(new LBitmapData(imglist["music"])));
        isClickM = LSound.webAudioEnabled;
        if (!isLoadSound) {
            isLoadSound = true;
            if (isClickM || !isAndroid) {
                stopsound.load(imglist["stopsound"]);
                sound_bg.load(imglist["sound_bg"]);
       
                stopsound.playSegment(0, 0.01);       
                sound_bg.play(0, 100);
            } else {
                sound_bg.load(imglist["sound_bg"]);
                sound_bg.play(0, 100);
            }
        }
           
    }else{
        musicsprit.addChild(new LBitmap(new LBitmapData(imglist["unmusic"])));           
    }
    
    backLayer.removeAllChild();
    tempLayer.removeAllChild();
    p2_bjLBitmap = new LBitmap(new LBitmapData(imglist["p2_bj"]));  
    middleLayer.addChild(p2_bjLBitmap);

    p2_bjLBitmapto = p2_bjLBitmap.clone();
    p2_bjLBitmapto.x = p2_bjLBitmap.getWidth();
    middleLayer.addChild(p2_bjLBitmapto);

    p2_bjLBitmapend = new LBitmap(new LBitmapData(imglist["p2_bj1"]));
    p2_bjLBitmapend.x = p2_bjLBitmap.getWidth() * 4;
    middleLayer.addChild(p2_bjLBitmapend);

    p2_WLsprit = new LSprite();
    var listw = LGlobal.divideCoordinate(1611, 463, 1, 3);
    var dataw = new LBitmapData(imglist["p2_W"], 0, 0, 537, 463);
    p2_WLsprit = new LAnimationTimeline(dataw, listw);
    p2_WLsprit.setLabel("see", 0, 2, -1, false);
    p2_WLsprit.setLabel("ready", 0, 1, -1, false);
    p2_WLsprit.setLabel("stop", 0, 0, -1, false);
    p2_WLsprit.speed = 30;
    p2_WLsprit.stop();   
    p2_WLsprit.x = 100;
    p2_WLsprit.y = 0;
    tempLayer.addChild(p2_WLsprit);

    guang=new LBitmap(new LBitmapData(imglist["guang"]));
    guang.x=0;
    guang.y=180;
    guang.alpha=0;
    tempLayer.addChild(guang);

    p2_nLsprit = new LSprite();
    var list = LGlobal.divideCoordinate(1083, 363, 1, 3);
    var data = new LBitmapData(imglist["p2_n"], 0, 0, 361, 363);
    p2_nLsprit = new LAnimationTimeline(data, list);
    p2_nLsprit.setLabel("fly", 0, 2, -1, false);
    p2_nLsprit.setLabel("addspeed", 0, 1, -1, false);
    p2_nLsprit.setLabel("stopfly", 0, 0, -1, false);
    p2_nLsprit.speed = 50;
    p2_nLsprit.stop();  
    p2_nLsprit.x = 63;
    p2_nLsprit.y = 470;
    tempLayer.addChild(p2_nLsprit);

    p2_btnLsprit = new LSprite();
    p2_btnLsprit.addChild(new MiddleBitmap(new LBitmapData(imglist["P2_btn"])));
    p2_btnLsprit.x = 520;
    p2_btnLsprit.y = 687;
    middleLayer.addChild(p2_btnLsprit);
       
    p2_btnLsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
    p2_btnLsprit.alpha=1;
    LTweenLite.remove(weenbtn);
   // _smq.push(['custom','七夕小游戏','游戏页','前进按钮']);
   // _gaq.push(['_trackEvent','七夕小游戏','游戏页','前进按钮']);
        if (!isend) {
            isstart = true;
            isstop = false;
            var sppey = p2_nLsprit.y;
            p2_nLsprit.play();
            p2_nLsprit.gotoAndStop("addspeed");
            ween = LTweenLite.to(p2_nLsprit, 0.2, {
                y: sppey + 2,
                loop: true,
                ease: LEasing.None.easeOut
            }).to(p2_nLsprit, 0.2, {
                y: sppey - 2,
                loop: true,
                ease: LEasing.None.easeOut
            })
        }
        else {
            isend = true;
            isstart = false;
            isstop = true;
            gamefail();
        }
    });
    p2_btnLsprit.addEventListener(LMouseEvent.MOUSE_UP, function () {
        if (isend) {
            isend = true;
            isstart = false;
            isstop = true;
            gamefail();
        } else {
            isstop = true;
            if(ismusic){
                 stopsound.play();
            }
            p2_nLsprit.play();
            p2_nLsprit.gotoAndStop("stopfly");
            speed = 1;
            speedindex = 0.01;
            LTweenLite.remove(ween);
        }
    });
    p2_btnLsprit.addEventListener(LMouseEvent.MOUSE_OUT, function () {
        if (isend) {
            isend = true;
            isstart = false;
            isstop = true;
            gamefail();
        } else {
            isstop = true;
            if(ismusic){
                 stopsound.play();
            }
            p2_nLsprit.play();
            p2_nLsprit.gotoAndStop("stopfly");
            speed = 1;
            speedindex = 0.01;
            LTweenLite.remove(ween);
        }
    });

    bgShape = new LShape();
    bgShape.graphics.drawRect(1, "#000", [0, 0, 640, 1040], true, "#000");
    bgShape.alpha = 0.7;
    topLayer.addChild(bgShape);

    var TimeLBitmap = new BottomBitmap(new LBitmapData(imglist["Time"]));
    TimeLBitmap.x = 61;
    TimeLBitmap.y = LGlobal.height - 15;
    middleLayer.addChild(TimeLBitmap);

    TimeimgLsprit = new LSprite();
    TimeimgLsprit.addChild(new LeftMiddleBitmap(new LBitmapData(imglist["Timeimg"])));
    TimeimgLsprit.x = 110;
    TimeimgLsprit.y = LGlobal.height - 77;
    TimeimgLsprit.scaleX = 1;
    middleLayer.addChild(TimeimgLsprit);

    var TimetopLBitmap = new LeftMiddleBitmap(new LBitmapData(imglist["Timetop"]));
    TimetopLBitmap.x = 90;
    TimetopLBitmap.y = LGlobal.height - 77;
    TimetopLBitmap.scaleX = 1;
    middleLayer.addChild(TimetopLBitmap);

    coutTextField = new LTextField();
    coutTextField.color = "#ff0000";
    coutTextField.size =100;
    coutTextField.textAlign = "center";
    coutTextField.weight = "bolder";
    coutTextField.x = 320;
    coutTextField.y = 380;
    coutTextField.text = "Ready!";
    topLayer.addChild(coutTextField);

    LTweenLite.to(coutTextField, 0.7, { delay: 0.2, alpha: 0, ease: LEasing.Strong.easeOut,
        onComplete: function () {
            coutTextField.size = 100;
            coutTextField.text = "2";
            coutTextField.alpha = 1;
            LTweenLite.to(coutTextField, 0.7, { delay: 0.2, alpha: 0, ease: LEasing.Strong.easeOut,
                onComplete: function () {
                    coutTextField.text = "1";
                    coutTextField.alpha = 1;
                    LTweenLite.to(coutTextField, 0.7, { delay: 0.2, alpha: 0, ease: LEasing.Strong.easeOut,
                        onComplete: function () {
                            coutTextField.text = "Go!";
                            coutTextField.alpha = 1;
                            setTimeout(function () {
                                roadindex=0;
                                gameStart();
                            }, 300);
                        }
                    })
                }
            })
        }
    })
}
function gameStart() {
    isstart = true;
    isstop = true;
    topLayer.removeAllChild();   
    weenbtn=LTweenLite.to(p2_btnLsprit,0.5,{
        alpha:0.5,
        loop:true,
    }).to(p2_btnLsprit,0.5,{
        alpha:1,
        loop:true,
    });
    tempLayer.addEventListener(LEvent.ENTER_FRAME, onframe);
}
function gameover() {
    tempLayer.removeAllEventListener();
    tempLayer.removeAllChild();
    middleLayer.removeAllChild();
    var P4_bjLBitmap = new LBitmap(new LBitmapData(imglist["P1_bj"]));
    backLayer.addChild(P4_bjLBitmap);

    var p3_bjLbitmap = new LBitmap(new LBitmapData(imglist["P1_bj"]));
    middleLayer.addChild(p3_bjLbitmap);

    var p3_logoLbitmap = new LBitmap(new LBitmapData(imglist["P1_logo"]));
    p3_logoLbitmap.x = 33;
    p3_logoLbitmap.y = 26;
    middleLayer.addChild(p3_logoLbitmap);

    var P3_SuessBitmap = new LBitmap(new LBitmapData(imglist["P3_suess"]));
    P3_SuessBitmap.x = 82;
    P3_SuessBitmap.y = 118;
    P3_SuessBitmap.alpha = 0;
    LTweenLite.to(P3_SuessBitmap, 1, {
        y: 180,
        alpha: 1,
        ease: LEasing.Quint.easeOut,
        onStart: function () {
            var P3_manLBitmap = new LBitmap(new LBitmapData(imglist["P3_man"]));
            P3_manLBitmap.x = -100;
            P3_manLBitmap.y = 610;
            P3_manLBitmap.alpha = 0;
            LTweenLite.to(P3_manLBitmap, 0.8, {
                x: -30,
                y: 570,
                alpha: 1,
                delay: 0.5,
                ease: LEasing.Strong.easeOut
            });
            middleLayer.addChild(P3_manLBitmap);
            var P3_womanLBitmap = new LBitmap(new LBitmapData(imglist["P3_woman"]));
            P3_womanLBitmap.x = 400;
            P3_womanLBitmap.y = 380;
            P3_womanLBitmap.alpha = 0;
            LTweenLite.to(P3_womanLBitmap, 0.8, {
                x: 351,
                y: 439,
                alpha: 1,
                delay: 0.5,
                ease: LEasing.Strong.easeOut,
                onStart:function(){
                    var lotbtnsprite=new LSprite();
                    lotbtnsprite.x=205;
                    lotbtnsprite.y=302;
                    middleLayer.addChild(lotbtnsprite);

                    var lotbtn1=new LBitmap(new LBitmapData(imglist["lotbtn1"]));
                    lotbtn1.x=0;
                    lotbtn1.y=0;
                    lotbtnsprite.addChild(lotbtn1);

                    var lotbtn=new LBitmap(new LBitmapData(imglist["lotbtn"]));
                    lotbtn.x=0;
                    lotbtn.y=0;
                    lotbtnsprite.addChild(lotbtn);
                    LTweenLite.to(lotbtn,0.5,{
                        alpha:0,
                        loop:true
                    }).to(lotbtn,0.5,{
                        alpha:1              
                    }); 

                    lotbtnsprite.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
                       // _smq.push(['custom','七夕小游戏','挑战成功','翻页按钮']);
                        //_gaq.push(['_trackEvent','七夕小游戏','挑战成功','翻页按钮']);
                        showpage();
                    });
                }
            });
            middleLayer.addChild(P3_womanLBitmap);
        },
        onComplete: function () {
//            var P4_bjmLBitmap = new LBitmap(new LBitmapData(imglist["P1_bj"]));
//            var maskObjp4 = new LSprite();
//            maskObjp4.x=580;
//            maskObjp4.y=LGlobal.height-100;
//            maskObjp4.graphics.drawVertices(0, "#ff0000", [[65,0], [65,100],[0,100]]);                       
//            P4_bjmLBitmap.mask = maskObjp4;            
//            middleLayer.addChild(P4_bjmLBitmap);  
//            var tween;
//            var P3_pagebtn = new LSprite();
//            P3_pagebtn.addChild(new BottomBitmap(new LBitmapData(imglist["P3_page"])));
//            P3_pagebtn.x = 550;
//            P3_pagebtn.y = LGlobal.height;
//            P3_pagebtn.alpha=0;
//            middleLayer.addChild(P3_pagebtn);    
//            LTweenLite.to(P3_pagebtn,0.5,{alpha:1});
//            tween= LTweenLite.to(P3_pagebtn,1,{
//                scaleX: 1.5,
//                scaleY: 1.5,
//                x:500,
//                loop: true,
//                ease: LEasing.None.easeOut
//            }).to(P3_pagebtn,1,{
//                scaleX: 1,
//                scaleY: 1,
//                x:550,
//                loop: true,
//                ease: LEasing.None.easeOut
//            });
//            //翻页
//            P3_handLBitmap = new LSprite();
//            P3_handLBitmap.addChild(new BottomBitmap(new LBitmapData(imglist["P3_hand"])));
//            P3_handLBitmap.x = 559;
//            P3_handLBitmap.y = LGlobal.height+40;
//            P3_handLBitmap.scaleX = 1.2;
//            P3_handLBitmap.scaleY = 1.2;
//            middleLayer.addChild(P3_handLBitmap);
//            LTweenLite.to(P3_handLBitmap, 0.5, {
//                scaleX: 1.1,
//                scaleY: 1.1,
//                loop: true,
//                ease: LEasing.None.easeOut
//            }).to(P3_handLBitmap, 0.5, {
//                scaleX: 1.2,
//                scaleY: 1.2,
//                loop: true,
//                ease: LEasing.None.easeOut
//            })
//            var ispage=true;
//            P3_handLBitmap.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
//                if(ispage){
//                    _smq.push(['custom','七夕小游戏','挑战成功','翻页按钮']);
//                    _gaq.push(['_trackEvent','七夕小游戏','挑战成功','翻页按钮']);
//                    ispage=false;
//                    LTweenLite.to(P3_pagebtn, 0.4, {
//                        scaleX: 9,
//                        scaleY: 9,                   
//                        x: -600,
//                        y:200,
//                        ease: LEasing.None.easeOut,
//                        onComplete: function () {
//                            ispage=true;
//                            showpage();
//                        }
//                    })
//                    LTweenLite.to(maskObjp4, 0.3, {
//                        scaleX: 30,
//                        scaleY: 30,                   
//                        x: -600,
//                        y: -200,
//                        ease: LEasing.None.easeOut                    
//                    })   
//                }             
//            });
        }
    });
    middleLayer.addChild(P3_SuessBitmap);
}
function gamefail() {
    tempLayer.removeAllEventListener();
    tempLayer.removeAllChild();
    middleLayer.removeAllChild();

    var p3_bjLbitmap = new LBitmap(new LBitmapData(imglist["P1_bj"]));
    middleLayer.addChild(p3_bjLbitmap);

    var p3_logoLbitmap = new LBitmap(new LBitmapData(imglist["P1_logo"]));
    p3_logoLbitmap.x =33;
    p3_logoLbitmap.y=26;
    middleLayer.addChild(p3_logoLbitmap);

    var P3_failLBitmap = new LBitmap(new LBitmapData(imglist["P3_fail"]));
    P3_failLBitmap.x = 82;
    P3_failLBitmap.y = 118;
    P3_failLBitmap.alpha = 0;
    LTweenLite.to(P3_failLBitmap, 1, {
        y: 180,
        alpha: 1,
        ease: LEasing.Quint.easeOut,
        onStart: function () {
             var P3_manLBitmap = new LBitmap(new LBitmapData(imglist["P3_man"]));
            P3_manLBitmap.x = -100;
            P3_manLBitmap.y = 610;
            P3_manLBitmap.alpha = 0;
            LTweenLite.to(P3_manLBitmap, 0.8, {
                x: -30,
                y: 570,
                alpha: 1,
                delay: 0.5,
                ease: LEasing.Strong.easeOut
            });
            middleLayer.addChild(P3_manLBitmap);
            var P3_womanLBitmap = new LBitmap(new LBitmapData(imglist["P3_woman"]));
            P3_womanLBitmap.x = 400;
            P3_womanLBitmap.y = 380;
            P3_womanLBitmap.alpha = 0;
            LTweenLite.to(P3_womanLBitmap, 0.8, {
                x: 351,
                y: 439,
                alpha: 1,
                delay: 0.5,
                ease: LEasing.Strong.easeOut
            });
            middleLayer.addChild(P3_womanLBitmap);
        },
        onComplete: function () {
            var P3_againbtn = new LSprite();
            P3_againbtn.addChild(new BottomBitmap(new LBitmapData(imglist["P3_againbtn"])));
            P3_againbtn.x = 257;
            P3_againbtn.y = LGlobal.height - 15;
            P3_againbtn.alpha = 0;
            LTweenLite.to(P3_againbtn, 0.8, {
                y: LGlobal.height - 25,
                alpha: 1,
                ease: LEasing.Back.easeOut
            });
            P3_againbtn.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
               // _smq.push(['custom','七夕小游戏','挑战失败','再玩一次']);
                //_gaq.push(['_trackEvent','七夕小游戏','挑战失败','再玩一次']);
                isend = false;               
                speed = 1;
                speedindex = 0.01;
                middleLayer.removeAllChild();
                ReadGame();
            });
            middleLayer.addChild(P3_againbtn);
        }
    });
    middleLayer.addChild(P3_failLBitmap);
}
function showpage() {
    middleLayer.removeAllChild();
//    var P4_bjLBitmap = new LBitmap(new LBitmapData(imglist["P1_bj"]));
//    backLayer.addChild(P4_bjLBitmap);

    var P4_TT1LBitmap = new LBitmap(new LBitmapData(imglist["P4_TT1"]));
    P4_TT1LBitmap.x = -100;
    P4_TT1LBitmap.y = 460;
    topLayer.addChild(P4_TT1LBitmap);
    LTweenLite.to(P4_TT1LBitmap, 1, {
        x: 43,
        ease: LEasing.Elastic.easeOut
    });

    var P4_TT2LBitmap = new LBitmap(new LBitmapData(imglist["P4_TT2"]));
    P4_TT2LBitmap.x = 640;
    P4_TT2LBitmap.y = 460;
    topLayer.addChild(P4_TT2LBitmap);
    LTweenLite.to(P4_TT2LBitmap, 1, {
        x: 368,
        ease: LEasing.Elastic.easeOut,
        onStart: function () {
            setTimeout(function () {
                var P4_btn1Lsprit = new LSprite();
                P4_btn1Lsprit.addChild(new BottomBitmap(new LBitmapData(imglist["P4_btn1"])));
                P4_btn1Lsprit.x = 30;
                P4_btn1Lsprit.y = LGlobal.height - 78;
                P4_btn1Lsprit.scaleX = 0.6;
                P4_btn1Lsprit.scaleY = 0.6;
                P4_btn1Lsprit.alpha = 0;
                LTweenLite.to(P4_btn1Lsprit, 1, {
                    scaleX: 1,
                    scaleY: 1,
                    alpha: 1,
                    y: LGlobal.height - 18,
                    x: 60,
                    ease: LEasing.Elastic.easeOut
                });
                topLayer.addChild(P4_btn1Lsprit);
                 P4_btn1Lsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
                   // _smq.push(['custom','七夕小游戏','挑战成功','去电商']);
                    //_gaq.push(['_trackEvent','七夕小游戏','挑战成功','去电商']);
                    window.location.href="http://www.baidu.com ";
                 });  

                var P4_btn2Lsprit = new LSprite();
                P4_btn2Lsprit.addChild(new BottomBitmap(new LBitmapData(imglist["P4_btn2"])));
                P4_btn2Lsprit.x = 300;
                P4_btn2Lsprit.y = LGlobal.height - 78;
                P4_btn2Lsprit.scaleX = 0.6;
                P4_btn2Lsprit.scaleY = 0.6;
                P4_btn2Lsprit.alpha = 0;
                LTweenLite.to(P4_btn2Lsprit, 1, {
                    scaleX: 1,
                    scaleY: 1,
                    y: LGlobal.height - 18,
                    x: 247,
                    alpha: 1,
                    ease: LEasing.Elastic.easeOut
                });
                topLayer.addChild(P4_btn2Lsprit);
                P4_btn2Lsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
                   // _smq.push(['custom','七夕小游戏','挑战成功','分享']);
                   // _gaq.push(['_trackEvent','七夕小游戏','挑战成功','分享']);
                   // if (navigator.userAgent.toLowerCase().indexOf('micromessenger') > 0) {
                        var shareLsprit = new LSprite();
                        shareLsprit.addChild(new LBitmap(new LBitmapData(imglist["20"])));
                        topLayer.addChild(shareLsprit);
                        shareLsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
                            topLayer.removeChild(shareLsprit);
                        })
                   // } else {
                    //    window.location.href = "http://service.weibo.com/share/mobile.php?appkey=583395093&title=杜杜的七夕情人节,据说玩了这个游戏的人，都终成眷属了！&url=http://mobi.durex.com.cn/CVD/Index.html&source=bshare&retcode=0&pic=http://mobi.durex.com.cn/CVD/images/share.jpg";
                    //}
                });

                var P4_btn3Lsprit = new LSprite();
                P4_btn3Lsprit.addChild(new BottomBitmap(new LBitmapData(imglist["P4_btn3"])));
                P4_btn3Lsprit.x = 540;
                P4_btn3Lsprit.y = LGlobal.height - 78;
                P4_btn3Lsprit.scaleX = 0.6;
                P4_btn3Lsprit.scaleY = 0.6;
                P4_btn3Lsprit.alpha = 0;
                LTweenLite.to(P4_btn3Lsprit, 1, {
                    scaleX: 1,
                    scaleY: 1,
                    y: LGlobal.height - 18,
                    x: 430,
                    alpha: 1,
                    ease: LEasing.Elastic.easeOut
                });
                topLayer.addChild(P4_btn3Lsprit);
                P4_btn3Lsprit.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
                    //_smq.push(['custom','七夕小游戏','挑战成功','再玩一次']);
                    //_gaq.push(['_trackEvent','七夕小游戏','挑战成功','再玩一次']);
                    isend = false;
                    speed = 1;
                    speedindex = 0.01;
                    middleLayer.removeAllChild();
                    backLayer.removeAllChild();
                    topLayer.removeAllChild();
                    backLayer.removeAllEventListener();
                    ReadGame();
                });

                var P4_wordLBitmap = new LBitmap(new LBitmapData(imglist["P4_word"]));
                P4_wordLBitmap.x = 190;
                P4_wordLBitmap.y = 61;
                backLayer.addChild(P4_wordLBitmap);
                //console.log(1);
                isdrop = true;
                backLayer.addEventListener(LEvent.ENTER_FRAME, onframe1);
            }, 500);
        }
    });
}
var issee = false;
function onframe() {    
    if (isstart) {
        if (issee && !isstop) {
            isend = true;
            isstart = false;
            isstop = true;
            //失败            
            gamefail();
        } else {
            if (speed < 35&&!isstop) {
                speedindex += 0.01;
                speed = speed + speedindex;
            }
            if (!issee) {
                wspeed += Math.floor(Math.random() * 4);
            }

            if (wspeed > 180) {
                var windex = Math.floor(Math.random() * 60) + 240;
                if (wspeed > windex) {
                    var r = 1;
                    wspeed = -120;
                    if (r == 1 && !issee) {
                        p2_WLsprit.play();
                        p2_WLsprit.gotoAndStop("ready");
                        p2_WLsprit.stop();
                        setTimeout(function () {
                            issee = true;
                            p2_WLsprit.play();
                            p2_WLsprit.gotoAndStop("see");
                            guang.alpha=1;
                            p2_WLsprit.stop();
                            setTimeout(function () {
                                issee = false;
                                guang.alpha=0;
                                p2_WLsprit.play();
                                p2_WLsprit.gotoAndStop("stop");
                                p2_WLsprit.stop();
                                wspeed = 0;
                            }, 1000)
                        }, 1000);
                    }
                }
            }
            if (!isstop) {
                if (speed >= 15) {
                    p2_nLsprit.play();
                    p2_nLsprit.gotoAndStop("fly");
                }

                if (p2_bjLBitmap.x <= -3737) {
                    if (roadindex < 2) {
                        p2_bjLBitmap.x = p2_bjLBitmapto.x + p2_bjLBitmapto.getWidth();
                        roadindex++;
                    }
                    else {
                        middleLayer.removeChild(p2_bjLBitmap);
                    }
                }
                p2_bjLBitmap.x -= speed;
                if (p2_bjLBitmapto.x <= -3737) {
                    if (roadindex < 2) {
                        p2_bjLBitmapto.x = p2_bjLBitmap.x + p2_bjLBitmapto.getWidth();
                        roadindex++;
                    }
                    else {
                        middleLayer.removeChild(p2_bjLBitmapto);
                    }
                }
                p2_bjLBitmapto.x -= speed;
                if (roadindex == 2) {
                    roadindex++;                   
                    if (p2_bjLBitmap.x > p2_bjLBitmapto.x) {
                        p2_bjLBitmapend.x = p2_bjLBitmap.x + 50;
                    } else {
                        p2_bjLBitmapend.x = p2_bjLBitmapto.x + 50;
                    }
                }
                p2_bjLBitmapend.x -= speed;
                //道路行驶
                if (p2_bjLBitmapend.x <= -5744) {
                    isend = true;
                    isstart = false;
                    //成功         
                    gameover();
                }               
            }

        }
        if (!isend) {
            if (TimeimgLsprit.scaleX > 0) {
                TimeimgLsprit.x += 0.0008;
                TimeimgLsprit.scaleX -= 0.00073;
            }
            else {
                isend = true;
                isstart = false;
                isstop = true;
                //失败
                gamefail();
            }
        }
    }    
}
function onframe1() {
    if (isdrop) {
        tspeed += 0.09;
        stepindex = stepindex + tspeed;
        if (stepindex > step && tempLayer.childList.length < 10) {
            stepindex = 0;
            tspeed = 0;
            var itemSprite = new LSprite();
            var ran = Math.floor(Math.random() * 4) + 1;
            var ranx = Math.floor(Math.random() * 500) + 100;

            itemSprite.addChild(new MiddleBitmap(new LBitmapData(imglist["P4_T" + ran])));
            itemSprite.y = -30;
            itemSprite.x = ranx;
            itemSprite.itemvalue = ran;
            itemSprite.down = false;
            tempLayer.addChild(itemSprite);
            itemSprite.addEventListener(LMouseEvent.MOUSE_DOWN, function (e) {
                //_smq.push(['custom','七夕小游戏','挑战成功','优惠券']);
               // _gaq.push(['_trackEvent','七夕小游戏','挑战成功','优惠券']);
                tempLayer.removeChild(e.currentTarget);
                isdrop = false;
                var exShape = new LShape();
                exShape.graphics.drawRect(1, "#fff", [0, 0, 640, 1136], true, "#000");
                exShape.alpha = 0.3;
                clickLayer.addChild(exShape);
                exShape.addEventListener(LMouseEvent.MOUSE_DOWN, function (e) {
                    clickLayer.removeAllChild();
                    isdrop = true;
                });

                var younum = Math.floor(Math.random() * 9);
                console.log(younum);
                var url=[
                "http://c.admaster.com.cn/c/a58449,b716527,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716528,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716529,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716530,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716531,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716532,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716533,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716534,c1835,i0,m101,h",
                "http://c.admaster.com.cn/c/a58449,b716535,c1835,i0,m101,h"
                ];
                var P4_you = new LSprite();
                P4_you.addChild(new LBitmap(new LBitmapData(imglist["P4_you"])));
                P4_you.x = 83;
                P4_you.y = 203;
                clickLayer.addChild(P4_you);             
                P4_you.addEventListener(LMouseEvent.MOUSE_DOWN, function (e) {
                 var pre = Math.floor(Math.random() * 100);                  
                    if(pre<60){
                       // _smq.push(['custom','七夕小游戏','优惠券','去电商']);
                       // _gaq.push(['_trackEvent','七夕小游戏','优惠券','去电商']);
                       window.location.href=url[younum];
                    }else{
                       window.location.href="http://c.admaster.com.cn/c/a58449,b722657,c1835,i0,m101,h";
                    }
                })

//                var p4_close = new LSprite();
//                p4_close.addChild(new LBitmap(new LBitmapData(imglist["P4_close"])));
//                p4_close.x = 511;
//                p4_close.y = 217;
//                clickLayer.addChild(p4_close);
//                p4_close.addEventListener(LMouseEvent.MOUSE_DOWN, function (e) {
//                    clickLayer.removeAllChild();
//                    isdrop = true;
//                });
            })
        }
        for (var temp = 0; temp < tempLayer.childList.length; temp++) {
            if (tempLayer.childList[temp].y >= 500) {
                tempLayer.removeChild(tempLayer.childList[temp]);
            }
            else {
                tempLayer.childList[temp].y += 3;
                tempLayer.childList[temp].scaleX -= 0.0025;
                tempLayer.childList[temp].scaleY -= 0.0025;
            }
        }
    }
}
function MiddleBitmap(bitmapData) {
    var self = this;
    base(self, LSprite, []);
    self.bitmapTitle = new LBitmap(bitmapData);
    self.bitmapTitle.x = -self.bitmapTitle.getWidth() * 0.5;
    self.bitmapTitle.y = -self.bitmapTitle.getHeight() * 0.5;
    self.addChild(self.bitmapTitle);
}
function BottomBitmap(bitmapData) {
    var self = this;
    base(self, LSprite, []);
    self.bitmapTitle = new LBitmap(bitmapData);
    self.bitmapTitle.x = 0;
    self.bitmapTitle.y = -self.bitmapTitle.getHeight();
    self.addChild(self.bitmapTitle);
}

function LeftMiddleBitmap(bitmapData) {
    var self = this;
    base(self, LSprite, []);
    self.bitmapTitle = new LBitmap(bitmapData);
    self.bitmapTitle.x = 0;
    self.bitmapTitle.y = -self.bitmapTitle.getHeight() * 0.5;
    self.addChild(self.bitmapTitle);
}

function TopRightBitmap(bitmapData) {
    var self = this;
    base(self, LSprite, []);
    self.bitmapTitle = new LBitmap(bitmapData);
    self.bitmapTitle.x = -self.bitmapTitle.getWidth();
    self.bitmapTitle.y = 0;
    self.addChild(self.bitmapTitle);
}
 window.addEventListener("onorientationchange" in window ? "orientationchange" : "resize", hengshuping, false);
    function hengshuping() {
        if (window.orientation == 180 || window.orientation == 0 || window.orientation == 90 || window.orientation == -90) {
            setTimeout(function () {
                LGlobal.resize();
                $(window).scrollTop(0);
                if (LGlobal.mobile) {
                    //根据长宽设置是否按高度适配
                    if (window.innerHeight / window.innerWidth > 1.48) {
                        LGlobal.width = 640;
                        LGlobal.height = 640 * window.innerHeight / window.innerWidth;
                        LGlobal.canvasObj.width = LGlobal.width;
                        LGlobal.canvasObj.height = LGlobal.height;
                    }
                }
                LGlobal.align = LStageAlign.TOP_MIDDLE;
                LGlobal.stageScale = LStageScaleMode.SHOW_ALL;
                LSystem.screen(LStage.FULL_SCREEN);
            }, 300);
        }

    }
function setCookie(name,value) 
{ 
var Days = 30; 
var exp = new Date(); 
exp.setTime(exp.getTime() + Days*24*60*60*1000); 
document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString(); 
} 
//读取cookies 
function getCookie(name) 
{ 
var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)"); 
if(arr=document.cookie.match(reg)) return unescape(arr[2]); 
else return null; 
} 
</script>
 <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
 <script src="./js/wxShare.js"></script>
</body></html>